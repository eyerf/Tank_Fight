日本南梦宫Namco公司的游戏《坦克大战》给童年的我留下了深刻的印象，能亲手做出这样一款游戏也一度成为过我童年的梦想。

仿照着那款游戏，该项目尝试使用java语言实现出这个游戏的绝大部分功能，从基础的游戏的界面，坦克的移动，子弹的发射，到更复杂地图的生成，游戏关卡的配置等等。

下面的内容会对项目内的文件夹，文件及其对应实现的功能做尽量详细的介绍。

## level文件夹
level文件夹存储着我设计的全部关卡的信息。

- gameInfo:该文件内保存的是全部关卡的数量
- lv_1-lv_3:文件内保存着敌人数量，种类，地图生成方法，关卡难度的配置信息。level数字越高，对应的地图会更复杂，通关需要击败的敌人会更多，敌人的种类数量也会增加。

通过Properties配置类，我们能读取到关卡的数量和关卡的配置信息，用于生成关卡。通过游戏配置，我们能保证对于代码不用做侵入式修改，直接编辑配置文件即可生成关卡，做到了解耦合。

## music文件夹
该文件夹内存储的是游戏用到的全部的音频文件，文件均来源于网络。

音乐包括了坦克升级，坦克或砖块爆炸（消失），开火，击中音效，以及最最经典的开始游戏时播放的BGM。

## res文件夹
游戏的图片资源文件夹,存储着包括爆照效果，砖块，敌人坦克，自己坦克等等的图片文件资源。

## src
源代码文件夹，实现游戏功能的全部代码均存放在src内。下面我会对src内全部包下的所有类及其实现功能做一个详细的介绍。

### tank_fight.app
- GameMain: 该类是该包下唯一的类。游戏的入口类，通过初始化游戏窗口类引导游戏正式开始，没有其他的功能。

### tank_fight.game
game包中存放的都是和游戏核心相关的类，不同类实现的功能可能有点杂，比如子弹类或者爆炸类，其实也可以单独建立一个包进行存放。下面是对tank_fight.game包下具体类的说明。

**Bullet**:子弹类。一个标准的javabean类，用于创建子弹对象并实现子弹相关的方法。

子弹的静态属性包括了子弹的默认移动速度（坦克速度的两倍）以及子弹的默认半径。

子弹的成员变量具体有子弹的坐标（x, y）, 子弹的移动速度（默认为默认速度），子弹的移动方向，子弹的攻击力，子弹的颜色以及子弹是否可见（在子弹移动出地图之后，子弹就应该被设置为不可见）。

子弹的成员方法这块值得一提的有三个：
- void draw(Graphics g)：该方法用于绘制子弹自身（如果visible属性为false，就不用绘制了）
- void logic()：子弹的逻辑，子弹的逻辑很简单就是移动，但是为了和后面其他类做到同统一，我还是设计了逻辑方法，方法内就调用了子弹的移动方法。
- void move()：子弹的移动方法。根据子弹的方向（dir）属性，判断子弹移动的方向，判断子弹下一帧应该移动的方向（计算子弹下一帧应该处在哪个坐标）。每次子弹移动的距离依据就是子弹的速度属性了，值得一提的是，如果子弹移动出了地图的边界，就应该将子弹的visible属性置为false。

**Explode**:爆照效果类。一个标准的javabean类，用于实现爆炸效果。因为爆炸的效果要实现起来还是挺复杂的（涉及到要加载爆炸的图片），单纯的一个方法不太适合用来实现爆炸效果了，所以我编写了一个类来专门控制爆炸的实现，同时也方便后续代码的复用（爆炸的效果需要在很多地方使用到，比如子弹和坦克碰撞，子弹和砖块碰撞，坦克血量归零之后自爆等等）。

爆炸的静态属性包括了爆炸持续的时间（帧数），爆炸用到的效果图片，以及爆炸图片的大小。在初始化类时，将爆炸需要的资源图片导入到了静态变量中。

爆炸的成员变量包括了爆炸的具体坐标，爆炸效果当前处于的帧数（爆炸也可以理解为一个动画的播放，当前的爆炸具体处于第几帧），以及当前爆炸是否可见（播放结束，爆炸不可见)。

爆炸类的成员方法只有一个：
- draw(Graphics g)：根据爆炸图片的宽，高，绘制出爆炸图片。在绘制完最后一帧以后，将爆炸设置为不可见。

**GameFrame**:游戏的主窗口类，也是游戏的核心类，游戏中所有展示的内容都会在该类中实现

GameFrame的静态变量:
- int gameState:游戏状态
- int menuIndex:菜单状态索引（被指向的选项高亮表示）
- int titleBarH：标题栏的高度
- Tank myTank：自己的坦克对象
- List<Tank> enemies：敌人的坦克容器
- int bornEnemyCount：统计本关卡一共出现的敌人数量
- int killEnemyCount：已击败的敌人数量
- GameMap gameMap：游戏地图

GameFrame的构造方法:由启动类GameMain进行调用，初始化游戏，初始化游戏的开始窗口界面，初始化对于游戏开始界面窗口的监听，并启动一个线程开始刷新窗口

GameFrame的成员方法:
- void initGame():对游戏进行初始化,将游戏状态设置为STATE_MENUE（菜单界面）
- void initFrame(): 对游戏属性进行初始化，设置标题，设置窗口大小，设置窗口的左上角的坐标，设置窗口大小不可改变，设置窗口可见
- void update(Graphics g1): 是Frame类继承下来的方法,该方法负责了所有的绘制的内容，所有需要在屏幕中显示的内容，都要在该方法中调用。该方法不能主动调用。必须通过调用repaint()去回调该方法
- void drawLost(Graphics g, String str): 绘制游戏结束的方法
- drawWin(Graphics g):绘制游戏胜利的界面
- drawRun(Graphics g): 游戏运行状态的绘制内容,包括黑色的背景，地图的碰撞层，地图的遮挡层，同时调用子弹和坦克的碰撞的方法，子弹和所有的地图块的碰撞方法进行碰撞检测
- drawEnemies(Graphics g):绘制所有的敌人的坦克, 但是如果敌人已经死亡，就需要从容器中移除它
- 
